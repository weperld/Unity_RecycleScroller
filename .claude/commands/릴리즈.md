---
description: 릴리즈 - UPM 패키지 버전업 및 릴리즈
---

UPM 패키지 릴리즈를 진행해주세요.

[버전]: $ARGUMENTS

**작업 절차**:
1. **사전 검증**:
   - `git status`로 워킹 트리 클린 확인 (미커밋 변경이 있으면 중단)
   - 현재 `Packages/com.phjun.recyclescroller/package.json`의 version 확인
   - 최신 Git 태그 확인

2. **버전 결정**:
   - 버전이 지정된 경우: 해당 버전 그대로 사용 (예: `1.2.0`, `v1.2.0`)
   - 버전이 없는 경우: 이전 태그 이후 커밋 태그를 분석하여 자동 결정
     - `[feat]` 또는 `[refactor]`가 포함 → **minor** (1.0.0 → 1.1.0)
     - `[fix]`, `[docs]`, `[style]`, `[test]`, `[perf]`, `[chore]`만 있음 → **patch** (1.0.0 → 1.0.1)
     - 사용자에게 질문하지 않고 자동으로 판단하여 바로 진행

3. **package.json 버전 업데이트**:
   - `Packages/com.phjun.recyclescroller/package.json`의 `"version"` 필드를 새 버전으로 수정
   - 버전 형식은 SemVer (v 접두사 없이, 예: `1.1.0`)

4. **CHANGELOG.md 업데이트**:
   - `Packages/com.phjun.recyclescroller/CHANGELOG.md` 상단에 새 버전 엔트리 추가
   - 이전 태그 이후 커밋 목록 수집: `git log <이전태그>..HEAD --oneline`
   - 커밋을 태그별로 분류하여 작성:
     ```markdown
     ## [1.1.0] - 2026-02-12

     ### Added
     - 커밋 내용 ([feat] 커밋)

     ### Fixed
     - 커밋 내용 ([fix] 커밋)

     ### Changed
     - 커밋 내용 ([refactor], [chore] 커밋)

     ### Documentation
     - 커밋 내용 ([docs] 커밋)
     ```

5. **커밋 및 태그 생성**:
   - 변경된 package.json, CHANGELOG.md를 커밋: `[release] v<버전>`
   - `git tag -a v<버전> -m "Release v<버전>"` 으로 어노테이트 태그 생성

6. **푸시**:
   - `git push origin main` 으로 커밋 푸시
   - `git push origin v<버전>` 으로 태그 푸시

7. **GitHub 릴리즈** (gh CLI 사용 가능 시):
   - `gh release create v<버전> --title "v<버전>" --notes "CHANGELOG 내용"`
   - gh CLI가 없으면 GitHub 웹에서 릴리즈 생성 안내
   - 릴리즈 설명에 UPM 설치 URL 포함:
     ```
     ## Install via UPM
     `https://github.com/weperld/Unity_RecycleScroller.git?path=Packages/com.phjun.recyclescroller#v<버전>`
     ```

8. **완료 보고**:
   - 이전 버전 → 새 버전 표시
   - 커밋 수, 변경 파일 수 표시
   - 버전 고정 설치 URL 안내

**요구사항**:
- 워킹 트리가 클린하지 않으면 릴리즈 진행 금지
- 이미 존재하는 태그와 중복 시 릴리즈 진행 금지
- package.json의 version은 v 접두사 없이 SemVer (예: `1.1.0`)
- Git 태그는 v 접두사 포함 (예: `v1.1.0`)
- CHANGELOG.md는 Keep a Changelog 형식 준수

**예시**:

```bash
# 버전 직접 지정
/project:릴리즈 1.2.0
→ package.json: 1.1.0 → 1.2.0
→ CHANGELOG.md 업데이트
→ 커밋: [release] v1.2.0
→ 태그: v1.2.0 생성 및 푸시
→ GitHub 릴리즈 생성
→ 설치 URL: ...#v1.2.0

# 버전 자동 결정
/project:릴리즈
→ 현재 버전: 1.0.0, 최신 태그: v1.0.0
→ 커밋 분석: [feat] 2건, [fix] 1건 → minor
→ 새 버전: 1.1.0 자동 결정
→ 릴리즈 완료
```
